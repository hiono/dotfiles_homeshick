# -*- mode: org; coding: utf-8-unix; indent-tabs-mode: nil -*-
#+TITLE: DDSKK の設定
#+AUTHOR: Hiroyuki Ono
#+EMAIL: bps@sculd.com
#+LASTUPDATE: 2015-10-23 15:01:45
#+LANG: ja
#+LAYOUT: page
#+CATEGORIES: emacs
#+PERMALINK: config/ddskk_config.html
* 始めに
  本家: [[http://openlab.ring.gr.jp/skk/ddskk-ja.html][Daredevil SKK]] より
  #+BEGIN_QUOTE
  Daredevil SKK (DDSKK) は Emacs Lisp 版の SKK です. 本家 SKK を受け継い
  で開発を行っています.
  #+END_QUOTE
  [[file:init.org][Emacs の基本設定]] で
  - skk-user-directory
  - skk-init-file
  を設定しているので, 設定ファイルの構成は
  #+BEGIN_EXAMPLE
    skk-init-file          ~/.emacs.d/tmp/skk/init
    skk-jisyo              ~/.emacs.d/tmp/skk/jisyo
    skk-backup-jisyo       ~/.emacs.d/tmp/skk/jisyo.bak
    skk-emacs-id-file      ~/.emacs.d/tmp/skk/emacs-id
    skk-record-file        ~/.emacs.d/tmp/skk/record
    skk-study-file         ~/.emacs.d/tmp/skk/study
    skk-study-backup-file  ~/.emacs.d/tmp/skk/study.bak
  #+END_EXAMPLE
  となっている (このファイルは ddskk_config.org).

  #+BEGIN_SRC emacs-lisp
    (use-package skk
      :quelpa ddskk
      :bind (("C-\\" . toggle-input-method)
             ("C-x j" . skk-auto-fill-mode)) ;;良い感じに改行を自動入力してくれる機能
      :init
      (setq skk-user-directory (concat my:temp-dir "skk")) ; User dir を temp-dir 以下に
      (setq default-input-method "japanese-skk")
      :config
      (setq skk-byte-compile-init-file t)
      )
  #+END_SRC

* sticky-shift
  sticky shift については [[http://homepage1.nifty.com/blankspace/emacs/sticky.html][sticky shift]] を参照のこと.
  ddskk の 14.2 以降から同梱されるようになった (ありがたい)

  #+BEGIN_SRC emacs-lisp
    (setq skk-sticky-key ";")
  #+END_SRC

* 表示関連

  #+BEGIN_SRC emacs-lisp
    ;; インジケータを左端に.
    (setq skk-status-indicator 'left)
    ;; インジケータの表示のカスタマイズ
    ;; (setq skk-latin-mode-string "[_A]")
    (setq skk-hiragana-mode-string "[あ]")
    (setq skk-katakana-mode-string "[ア]")
    (setq skk-jisx0208-latin-mode-string "[A]")
    (setq skk-jisx0201-mode-string "[_ｱ]")
    (setq skk-indicator-use-cursor-color nil)
  #+END_SRC

* 編集関連

  #+BEGIN_SRC emacs-lisp
    (add-hook 'skk-load-hook
              (lambda ()
                ;; Enter で改行しない
                (setq skk-egg-like-newline t)
                ;;"「"を入力したら"」"も自動で挿入
                (setq skk-auto-insert-paren t)
                ;; 句読点変換ルール
                (setq skk-kuten-touten-alist
                      '(
                        (jp . ("." . ","))
                        (en . ("." . ","))
                        ))
                ;; 全角記号の変換
                (add-to-list 'skk-rom-kana-rule-list
                             '(("!" nil "!")
                               (":" nil ":")
                               (";" nil ";")
                               ("?" nil "?")
                               ("z " nil "　")
                               ("\\" nil "\\")
                               ))
                ;; 全角英語モードで U+FF0D, U+FF5E を入力する?
                ;; (when (not (string< mule-version "6.0"))
                ;;   (aset skk-jisx0208-latin-vector ?- (string #xFF0D))
                ;;   (aset skk-jisx0208-latin-vector ?~ (string #xFF5E)))
                ;; @で挿入する日付表示を西暦&半角に
                (setq skk-date-ad t)
                (setq skk-number-style nil)
                ;; 送り仮名が厳密に正しい候補を優先
                (setq skk-henkan-strict-okuri-precedence t)
                ;; 辞書の共有
                (setq skk-share-private-jisyo t)
                ;; コード中では自動的に英字にする。
                (require 'context-skk)
                ;; 学習機能
                (require 'skk-study)
                ))
  #+END_SRC

* 動的補完

  #+BEGIN_SRC emacs-lisp
    (add-hook 'skk-load-hook
              (lambda ()
                (require 'skk-dcomp)
                ;; 動的補完
                (setq skk-dcomp-activate t)
                (setq skk-dcomp-multiple-activate t)
                (setq skk-dcomp-multiple-rows 5)
                ;; 動的補完の複数表示群のフェイス
                (set-face-foreground 'skk-dcomp-multiple-face "Black")
                (set-face-background 'skk-dcomp-multiple-face "LightGoldenrodYellow")
                (set-face-bold-p 'skk-dcomp-multiple-face nil)
                ;; 動的補完の複数表示郡の補完部分のフェイス
                (set-face-foreground 'skk-dcomp-multiple-trailing-face "dim gray")
                (set-face-bold-p 'skk-dcomp-multiple-trailing-face nil)
                ;; 動的補完の複数表示郡の選択対象のフェイス
                (set-face-foreground 'skk-dcomp-multiple-selected-face "White")
                (set-face-background 'skk-dcomp-multiple-selected-face "LightGoldenrod4")
                (set-face-bold-p 'skk-dcomp-multiple-selected-face nil)
                ))
  #+END_SRC

* 部首変換, 総画数変換

  #+BEGIN_SRC emacs-lisp
    ;; (require 'skk-tankan)
    ;; (add-to-list 'skk-search-prog-list
    ;;              '(skk-tankan-search 'skk-search-jisyo-file
    ;;                                  skk-large-jisyo 10000))
  #+END_SRC
